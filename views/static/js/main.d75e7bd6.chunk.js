(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(e,t,a){e.exports=a(371)},179:function(e,t,a){},181:function(e,t,a){},371:function(e,t,a){"use strict";a.r(t);var n=a(1),l=a.n(n),r=a(9),o=a.n(r),s=(a(179),a(16)),c=a(17),i=a(19),m=a(18),u=a(20),h=(a(181),a(381)),p=a(386),d=a(372),g=a(385),f=a(375),E=f.a.Meta,b=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(f.a,{hoverable:!0,style:{width:240},cover:l.a.createElement("img",{alt:"example",src:"https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png"})},l.a.createElement(E,{title:"Europe Street beat",description:"www.instagram.com"})))}}]),t}(n.Component),v=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){var a=e.state,n=a.form;a.dirty;n[t.target.name]=t.target.value,e.setState({form:n,dirty:!0})},e.state={},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement("h1",null,"Home"),l.a.createElement(b,null))}}]),t}(n.Component),y=a(374),C=a(378),O=a(223),S=a(234),j=a(114),w=a(11),x=a(376),k=a(377),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={previewVisible:!1,previewImage:"",fileList:[]},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.handleChange=function(e){var t=e.fileList;return a.setState({fileList:t})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,r=l.a.createElement("div",null,l.a.createElement(w.a,{type:"plus"}),l.a.createElement("div",{className:"ant-upload-text"},"Upload"));return l.a.createElement("div",{className:"clearfix"},l.a.createElement(x.a,{action:"//jsonplaceholder.typicode.com/posts/",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=3?null:r),l.a.createElement(k.a,{visible:t,footer:null,onCancel:this.handleCancel},l.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),t}(n.Component),N=a(65),U=a.n(N),A=y.a.Item,M=C.a.TextArea,P=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){var a=e.state.form;a[t.target.name]=t.target.value,console.log(a),e.setState({form:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.form,n="http://localhost:3000/api/auth/".concat(e.props.user._id),l={"Content-Type":"application/json","x-access-token":localStorage.getItem("token")};U.a.patch(n,a,{headers:l}).then(function(t){e.props.updateUser(JSON.stringify(t.data.user))}).catch(function(e){console.log(e)})},e.state={form:{name:"",last_name:"",password:"",description:""}},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e="http://localhost:3000/api/auth/".concat(this.props.user._id),t={"Content-Type":"application/json","x-access-token":localStorage.getItem("token")};U.a.get(e,{headers:t}).then(function(e){console.log("Data desde component profile",e.data.user),localStorage.setItem("user",JSON.stringify(e.data.user))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement(O.a,null,l.a.createElement(S.a,{span:8,offset:8},l.a.createElement("h1",{style:{textAlign:"center"}},"Profile"),l.a.createElement(I,null),l.a.createElement(y.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(A,null,l.a.createElement(C.a,{type:"text",placeholder:"Nombre",name:"name",onChange:this.handleChange,defaultValue:this.props.user.name})),l.a.createElement(A,null,l.a.createElement(C.a,{type:"text",placeholder:"Apellido",name:"last_name",onChange:this.handleChange,defaultValue:this.props.user.last_name})),l.a.createElement(A,null,l.a.createElement(C.a,{type:"text",placeholder:"Email",name:"email",disabled:!0,defaultValue:this.props.user.email})),l.a.createElement(A,null,l.a.createElement(C.a,{type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),l.a.createElement(A,null,l.a.createElement(M,{rows:3,placeholder:"Escribe algo sobre ti",name:"description",onChange:this.handleChange,defaultValue:this.props.user.description})),l.a.createElement(A,null,l.a.createElement(j.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Guardar"))))))}}]),t}(n.Component),L=a(380),T=a(379),B=y.a.Item,z=C.a.TextArea,V=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleChangeNumber=function(t){var a=e.state.form.photos;a=(a=(a=(a=t.fileList).slice(-2)).map(function(e){return e.response&&(e.url=e.response.url),e})).filter(function(e){return!!e.response&&"success"===e.response.status}),e.setState({photos:a})},e.handleUploadPhotos=function(t){var a=e.state.form;console.log(a);var n=t.fileList.name;console.log(n),e.setState({form:a})},e.handleChange=function(t){var a=e.state.form;a[t.target.name]=t.target.value,e.setState({form:a})},e.state={form:{name:"",price:"",description:"",type:"",size:"",photos:[]}},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"container"},l.a.createElement(O.a,null,l.a.createElement(S.a,{span:8,offset:8},l.a.createElement(y.a,{onSubmit:this.handleSubmit,className:"login-form"},l.a.createElement(B,null,l.a.createElement(C.a,{placeholder:"Nombre",name:"name",onChange:this.handleChange})),l.a.createElement(B,null,l.a.createElement(L.a,{name:"price",min:1,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onChange:this.handleChangeNumber})," ","Pesos"),l.a.createElement(B,null,l.a.createElement(z,{name:"description",rows:4,placeholder:"Describe tu espaci\xf3",onChange:this.handleChange})),l.a.createElement(B,null,l.a.createElement(T.a.Group,{defaultValue:"STORAGE",name:"type",buttonStyle:"outline",size:"small",onChange:this.handleChange},l.a.createElement(T.a.Button,{value:"STORAGE"},"Almacenamiento"),l.a.createElement(T.a.Button,{value:"ACOOMMODATION"},"Alojamiento"))),l.a.createElement(B,null,l.a.createElement(T.a.Group,{defaultValue:"MEDIUM",name:"size",buttonStyle:"outline",size:"small",onChange:this.handleChange},l.a.createElement(T.a.Button,{value:"SMALL"},"Peque\xf1o"),l.a.createElement(T.a.Button,{value:"MEDIUM"},"Mediano"),l.a.createElement(T.a.Button,{value:"BIG"},"Grande"))),l.a.createElement(B,null,l.a.createElement(x.a,{name:"photos",onChange:this.handleUploadPhotos,listType:"picture",multiple:!0},l.a.createElement(j.a,null,l.a.createElement(w.a,{type:"upload"})," Upload"))),l.a.createElement(B,null,l.a.createElement(j.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Crear Espacio"))))))}}]),t}(n.Component),D=function(e){var t=e.user;e.updateUser;return l.a.createElement(p.a,null,l.a.createElement(d.a,{exact:!0,path:"/",component:v}),l.a.createElement(d.a,{exact:!0,path:"/profile",render:function(e){return t?l.a.createElement(P,Object.assign({},e,{user:t})):l.a.createElement(g.a,{to:"/"})}}),l.a.createElement(d.a,{exact:!0,path:"/place",render:function(e){return t?l.a.createElement(V,Object.assign({},e,{user:t})):l.a.createElement(g.a,{to:"/"})}}))},G=a(382),_=a(383),J=a(373),H=a(387),R=y.a.Item,W=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){var a=e.state.form;a[t.target.name]=t.target.value,e.setState({form:a})},e.handleSubmit=function(t){t.preventDefault();var a,n,l=e.state.form;a=e.props.login?"/login":"/register",U.a.post("".concat("http://localhost:3000/api/auth").concat(a),l).then(function(t){200===t.status?(n="Bienvenido",localStorage.setItem("token",t.data.token),localStorage.setItem("user",JSON.stringify(t.data.user))):n=t.data.msg,e.setState({message:n}),e.info(),e.props.handleCancel()}).catch(function(t){n=t.message.includes(500)?"La direccion de correo ya existe":t.message.includes(400)?"Hacen falta datos en el formulario":"La contrase\xf1a es incorrecta",e.setState({message:n}),e.error()})},e.info=function(){_.a.success(e.state.message,3)},e.error=function(){_.a.error(e.state.message,3)},e.state={form:{name:"",last_name:"",email:"",password:"",confirmPassword:""},message:""},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillUnmount",value:function(){this.props.updateUser(localStorage.getItem("user"))}},{key:"render",value:function(){return l.a.createElement(y.a,{onSubmit:this.handleSubmit,className:"login-form"},this.props.login?null:l.a.createElement(R,null,l.a.createElement(C.a,{prefix:l.a.createElement(w.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Nombre",name:"name",onChange:this.handleChange})),this.props.login?null:l.a.createElement(R,null,l.a.createElement(C.a,{prefix:l.a.createElement(w.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Apellido",name:"last_name",onChange:this.handleChange})),l.a.createElement(R,null,l.a.createElement(C.a,{prefix:l.a.createElement(w.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",name:"email",onChange:this.handleChange})),l.a.createElement(R,null,l.a.createElement(C.a,{prefix:l.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password",name:"password",onChange:this.handleChange})),this.props.login?null:l.a.createElement(R,null,l.a.createElement(C.a,{prefix:l.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Confirmar Password",name:"confirmPassword",onChange:this.handleChange})),l.a.createElement(R,null,l.a.createElement(j.a,{type:"primary",htmlType:"submit",className:"login-form-button"},this.props.login?"Iniciar Sesi\xf3n":"Registro")))}}]),t}(n.Component),$=G.a.SubMenu,q=G.a.ItemGroup,K=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).handleCancel=function(t){e.setState({visible:!1})},e.showModal=function(t){var a=e.state.login;a="Iniciar Sesi\xf3n"===t.target.id,e.setState({visible:!0,title:t.target.id,login:a})},e.clearStorage=function(){localStorage.removeItem("token"),localStorage.removeItem("user"),_.a.success("Cerraste sesi\xf3n exitosamente",3)},e.state={visible:!1,title:"",login:!1},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},l.a.createElement("div",{className:"logo"}),localStorage.getItem("token")?l.a.createElement(G.a,{theme:"dark",mode:"horizontal",selectable:!1,style:{lineHeight:"64px"}},l.a.createElement(G.a.Item,null,l.a.createElement(H.a,{style:{color:"white"},exact:!0,to:"/place"},"Da de alta tu espacio")),l.a.createElement($,{title:null===this.props.user?l.a.createElement(J.a,{size:"large",src:"https://res.cloudinary.com/royquiroz/image/upload/v1541363947/Tfixeo/male.png"}):l.a.createElement(J.a,{size:"large",src:this.props.user.profile_pic})},l.a.createElement(q,null,l.a.createElement(G.a.Item,{key:"1"},l.a.createElement(H.a,{style:{border:0,textAlign:"left",paddingLeft:"1%"},exact:!0,to:"/profile"},"Perfil")),l.a.createElement(G.a.Item,{key:"2"},l.a.createElement(H.a,{style:{border:0,textAlign:"left",paddingLeft:"1%"},onClick:this.clearStorage,exact:!0,to:"/"},"Cerrar Sesi\xf3n"))))):l.a.createElement(G.a,{theme:"dark",mode:"horizontal",selectable:!1,style:{lineHeight:"64px"}},l.a.createElement(G.a.Item,null,l.a.createElement(j.a,{id:"Iniciar Sesi\xf3n",type:"primary",onClick:this.showModal},"Iniciar Sesi\xf3n")),l.a.createElement(G.a.Item,null,l.a.createElement(j.a,{id:"Registrate",type:"danger",onClick:this.showModal},"Registrate"))),l.a.createElement(k.a,{title:this.state.title,visible:this.state.visible,onCancel:this.handleCancel,destroyOnClose:!0,footer:null},l.a.createElement(W,Object.assign({handleCancel:this.handleCancel},this.state,{updateUser:this.props.updateUser}))))}}]),t}(n.Component),Q=h.a.Header,F=h.a.Content,X=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(i.a)(this,Object(m.a)(t).call(this))).updateUser=function(t){t=JSON.parse(t),e.setState({user:t})},e.state={user:""},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("user");e=JSON.parse(e),this.setState({user:e})}},{key:"render",value:function(){return l.a.createElement(h.a,{style:{backgroundColor:"white"}},l.a.createElement(Q,{style:{position:"fixed",zIndex:1,width:"100%"}},l.a.createElement(K,Object.assign({},this.state,{updateUser:this.updateUser}))),l.a.createElement(F,{style:{padding:"0 50px",marginTop:64}},l.a.createElement(D,Object.assign({},this.state,{updateUser:this.updateUser}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Y=a(384);o.a.render(l.a.createElement(function(){return l.a.createElement(Y.a,null,l.a.createElement(X,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[174,2,1]]]);
//# sourceMappingURL=main.d75e7bd6.chunk.js.map